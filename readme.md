#设计模式


##设计模式的用处

1. 实现可维护性复用的设计方案可以帮助开发者避免做一些重复性的工作，有助于提高设计和开发效率

2. 提供一套通用的设计词汇和一种通用的形式方便开发人员之间沟通与交流，提高交流效率

3. 提高系统的灵活性与可扩展性

4. 对设计模式的使用情况文档化有助于其他开发者更快理解系统

5. 设计模式有助于深入理解面向对象思想


##如何学习设计模式

1. 思考这个设计模式的意图是什么，它要解决什么问题，何时使用它，它如何解决问题，它的优缺点是什么，在使用的时候要注意什么


##类之间的关系

###关联关系

**定义：**是一种结构化关系，表示一类对象和另一类对象之间有联系。可以细分为双向关联、单向关联、自关联、多重性关联、聚合关系、组合关系

* 双向关联

	**定义：**例如顾客购买产品，顾客拥有产品，产品归属顾客

* 单向关联

	**定义：**例如顾客拥有地址
	
* 自关联

	**定义：**例如节点类的成员又是节点类
	
* 多重性关联

	**定义：**表示两个关联对象在数量上的对应关系。例如页面上可以有多个按钮，但一个按钮归属一个页面
	
* 聚合关系
	
	**定义：**表示整体与部分的关系，成员对象是整体对象的一部分，但是成员对象可以脱离整体对象独立存在。例如汽车与汽车发动机
	
	**实现：**成员对象通常作为构造方法、Setter方法或者业务方法的参数注入到整体对象中
	
* 组合关系

	**定义：**表示整体与部分的关系，但是在组合关系中整体对象可以控制成员对象的生命周期，一旦整体不存在，则成员对象也不存在。例如人的头与人的嘴巴
	
	**实现：**构造器方法中直接实例化成员类

###依赖关系
	
**定义：**是一种使用关系，表示特定事物的改变有可能会影响到使用该事物的其他事物，在需要表示一个事物使用另一个事物时使用依赖关系。例如驾驶员开车与车子启动

**实现：**将一个类的对象作为另一个类中方法的参数；在一个类的方法中将另一个类的对象作为其局部变量；在一个类中调用另一个类的静态方法

###泛化关系

**定义：**也就是继承关系，用于描述父类与子类之间的关系
	
###接口与实现关系

**定义：**类实现接口的声明操作

##面向对象设计的七大原则

###单一职责原则

**定义：**一个类只负责一个功能领域中的相应职责

**作用：**控制类的颗粒大小，实现软件设计的高内聚、低耦合

**核心思想：**如果一个类承担的职责越多，那么其被复用的可能性就越低；并且如果一个类承担的职责过多，就类似于将这些职责耦合在一起。当其中一个职责变化时，可能会影响其他职责的运作，因此要将这些职责进行分离

###接口隔离原则

**定义：**使用多个专门的接口，而不使用单一的总接口

**核心思想：**当一个接口太大时，需要将其分割为一些更小的接口，使用该接口的客户端仅需知道与之相关的方法即可

###依赖倒转原则

**定义：**抽象不应该依赖于细节，细节应该依赖于抽象。换而言之，要针对接口编程，而不是针对实现编程

**作用：**实现开闭原则的重要手段

**核心思想：**在代码中传递参数时或者在关联关系中，尽量引用层次高的抽象类，即使用接口和抽象类进行变量类型声明、参数类型声明、方法返回值类型声明以及数据类型的转换，而不用具体类做这些事情。在引入抽象层后，系统将具有更好的灵活性。在程序中尽量使用抽象层进行编程，当系统行为发生改变时，只需要对抽象层进行扩展，无须修改原有系统的源代码

###里氏替换原则

**定义：**所有引用基类对象的地方能够透明地使用其子类对象

**作用：**实现开闭原则的重要手段

**核心思想：**在软件中将一个基类对象替换为它的子类对象，程序不会出现任何错误和异常，反之则不成立，如果一个软件实体使用的是一个子类，那么它不一定能够使用其父类对象。因此在程序中尽量使用基类类型对对象进行定义，在运行时再确定其子类类型，用子类对象替换父类对象

###开闭原则

**定义：**软件实体应对扩展开放，对修改关闭。即软件实体应尽量在不修改原有代码的情况下进行扩展

**作用：**实现对象可复用，提高系统的灵活性和可扩展性

**核心思想：**对系统进行抽象化设计，为系统定义一个相对稳定的抽象层，将不同的实现行为移至具体的实现层中完成

###迪米特法则

**定义：**一个软件实体应当尽可能减少与其他实体发生互相作用

**作用：**降低系统的耦合度，使类与类之间保持松散的耦合关系

**核心思想：**迪米特法则规定，只与直接朋友通信。直接朋友包括：当前对象本身；以参数形式传入到当前对象方法中的对象；当前对象的成员对象；当前对象创建的对象。如果两个对象之间不必彼此直接通信，那么这两个对象就不应该发生任何直接的相互作用，可以通过引入合理的第三者来降低现有对象之间的耦合度

###合成复用原则

**定义：**尽量使用对象组合/聚合关系，而不是通过继承来达到复用的目的

**作用：**减少通过继承带来的破坏系统封装性的问题

**核心思想：**继承会将基类的实现细节暴露给子类，如果基类发生改变，那么子类的实现也不得不发生改变；从基类继承继承而来的实现是静态的，不可能在运行时发生改变，没有足够的灵活性。组合/聚合关系将已有对象纳入新对象，成员对象的实现细节对于新对象不可见，相较于继承，成员对象与新对象的耦合度也相对较低，在运行时，新对象可以动态引用与成员对象类型相同的其他对象


##设计模式

###创建型

**定义：**关注对象的创建过程，将对象的创建和使用分离，在使用对象时无须关心对象的创建细节，从而降低系统的耦合度

* 单例模式

	**定义：**保证某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例

*  简单工厂模式

	**定义：**定义一个工厂类，它可以根据参数的不同返回不同类的实例，被创建的实例通常都具有共同的父类

*  工厂方法模式

	**定义：**定义一个用于创建对象的接口，让子类决定将哪一个类实例化

*  抽象工厂模式

	**定义：**提供一个创建一系列相关或互相依赖对象的接口，而无须指定它们具体的类
	
*  原型模式

	**定义：**使用原型实例指定创建对象的种类，并且通过复制这些原型创建新的对象
	
* 建造者模式

	**定义：**将一个复杂对象的构建与它的表示分离，使得相同的构建过程可以创建不同的表示






